
  <view class="container" style="height: {{overflow? winHeight : 'auto'}}"  wx:if="{{isLoaded}}">
    
  <view class="menu-layer {{$menuList$fullMenu ? 'active' : ''}}">
    <view catchtap="$menuList$showMenu" class="menu-button"><text class="tips">快捷导航</text></view>
    <view class="menu-content">
      <view bindtap="$menuList$goIndex"><image src="../image/index-default.png"/></view>
      <view bindtap="$menuList$goCategory"><image src="../image/category-default.png"/></view>
      <view bindtap="$menuList$goCate"><image src="../image/cart-default.png"/></view>
      <view bindtap="$menuList$goUser"><image src="../image/user-default.png"/></view>
    </view>
  </view>

    <view class="detail-info">
      <view class="detail-img">
        <swiper current="{{swiperOpt.currentTab}}" indicator-dots="{{swiperOpt.indicatorDots}}" indicator-color="{{swiperOpt.indicatorColor}}" indicator-active-color="{{swiperOpt.indicatorActive}}" autoplay="{{swiperOpt.autoplay}}" interval="{{swiperOpt.interval}}" duration="{{swiperOpt.duration}}" catchchange="changeSwiper" bindanimationfinish="swiperEnd" class="index-swiper">
        <block>
            <!-- <swiper-item>
              <view class="video-layer {{showVideo ? '' : 'hidden'}}">
                <view bindtap="playVideo">
                <image src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1527831070072&di=c17eebe9d6f522ae2ba17b1df2451ae4&imgtype=0&src=http%3A%2F%2Fpic.qiantucdn.com%2F58pic%2F18%2F05%2F63%2F13K58PICkUA_1024.jpg" mode="aspectFill"></image>
                </view>
              </view>
              <view class="video-layer {{showVideo ? 'hidden': ''}}"><video id="myVideo" src="http://pic.ibaotu.com/00/63/01/12h888piCneY.mp4" controls id="video" bindpause="stopVideo" bindended="stopVideo" binderror="errorVideo"></video></view>
            </swiper-item> -->
             <swiper-item>
              <image src="{{detail.path}}" mode="aspectFill"/>
            </swiper-item>
        </block>
      </swiper>
      </view>
      <view class="detail-dots">
        <view class="detail-dots-gray"/>
        <view class="detail-solid"/>
        <view class="detail-dots-orange"/>
      </view>
      <view class="detail-txt">
        <view class="detail-txt-layer">
          <view class="detail-txt-content">
            <text>会员价</text>
            <text>￥{{detail.price}}</text>
          </view>
        </view>
        <view class="detail-txt-price">
          <text>原价</text>
          <text class="{{userLevel === 0 ? '' : 'through'}}">￥{{detail.oldprice}}</text>
          <navigator url="./applyVip" class="detail-link">成为会员?</navigator>
        </view>
        <view class="detail-txt-price express">
          <text>快递￥{{detail.express}}</text>
          <text class="tips">成为会员</text><text class="tips">即享包邮</text>
          <button class="default-button" hover-class="default-button-active" bindtap="goRules">配送规则</button>
        </view>
      </view>
    </view>
    <view class="content collcet-layer">
      <view class="detail-title">
        <view class="font-normal">{{detail.title}}</view>
        <view class="goods-promot">
          <view class="goods-promot-image">
            <image src="../image/icon-xian.png"/>
          </view>
          <view class="goods-info">
            {{detail.descript}}
            <view class="goods-end">
              <image src="../image/probq_bg.png" mode="right"/>
            </view>
          </view>
        </view>
      </view>
      <view class="detail-collect">
        <view class="detail-collect-icon {{collect? 'collected' : ''}}" bindtap="collectTap">
          <image src="{{collect ? '../image/icon-cart.png' : '../image/icon-cart-blank.png'}}"/>
          <text class="collect-txt">{{collectTxt}}</text>
        </view>
        <view class="detail-collect-user">
          <view class="detail-collect-detail">
            <text class="section">已有{{collectednum}}人收藏了本商品</text>
          </view>
          <view class="detail-collect-list" wx:if="{{collect}}">
            <text class="iconfont icon-leftsj collect"/><text class="un-collect collect">收藏成功</text>
          </view>
          <view class="detail-collect-list" wx:else>
            <text class="iconfont icon-leftsj"/><text class="un-collect">请点击收藏</text>
          </view>
        </view>
      </view>
    </view>
    <view class="content">
      <view class="detail-title">
         <text class="title">商品详情</text>
      </view>
      <view class="detail-container">
         <view class="section">关于商品</view>
         <block wx:for="{{goodsDetail}}" wx:for-index="index" wx:for-item="item" wx:key="key">
           <view class="detail-goods">
              <view class="detail-goods-title">{{item.title}}</view>
              <view class="detail-goods-content">{{item.detail}}</view>
           </view>
         </block>
      </view>
      <view class="detail-container">
         <view class="section">关于商品</view>
         <block wx:for="{{transportDetail}}" wx:for-index="index" wx:for-item="item" wx:key="key">
           <view class="detail-goods">
              <view class="detail-goods-title">{{item.title}}</view>
                <view wx:if="{{!item.isLink}}" class="detail-goods-content">{{item.detail}}</view>
                <navigate wx:else to="" class="detail-goods-content link">{{item.detail}}</navigate>
           </view>
         </block>
      </view>
      <view class="detail-container">
        <view class="section">关于</view>
      </view>
    </view>
    
  <view class="bottombar">
    <view class="contact">
      <button open-type="contact" session-from="udesk|{{$bottom$nick_name}}|{{$bottom$avatar}}|customer^{{$bottom$customer_info_str}}|note^{{$bottom$note_info_str}}" hover-class="contact-active">
        <text class="iconfont icon-kefu"/>
      </button>
    </view>
    <view class="goCart" bindtap="$bottom$goCart">
      <view class="goCart-icon user">
        <text class="iconfont icon-ksj_gwc"/>
        <text class="cart-count"  wx:if="{{$bottom$cartVal > 0}}">{{$bottom$cartMaxVal}}<text class="iconfont icon-sljia" wx:if="{{$bottom$cartVal >= 99}}"/></text>
      </view>
    </view>
    <view class="cart" bindtap="$bottom$addCart">
      <text>加入购物车</text>
    </view>
    <view class="buy" bindtap="$bottom$buyTap">
      <text>立即购买</text>
    </view>
  </view>

    <view class="popup" wx:if="{{overflow}}"/>
    <view class="popup__content {{overflow && cartModal? 'active' : ''}}">
      <view class="popup_close"><text class="title" catchtap="closeCart">关闭</text></view>
      <view class="popup_layer">
        <view class="popup_image">
          <image src="{{detail.path}}" mode="widthFix"/>
        </view>
        <view class="popup_goods">
          <view class="popup_goods_box">
            <view class="popup_goods_left">
              <text class="title">已选：</text>
            </view>
            <view class="popup_goods_right">
              <text class="title">{{cartResult.name}} × {{cartNum}}</text>
            </view>
          </view>
          <text class="title link">价格：￥{{totalCart}}</text>
          
  <view class="counter calculate">
    <view catchtap="$counterCart$plusTap" class="counter-btn {{$counterCart$isDisabled || $counterCart$disable ? 'disable' : ''}}" data-id="{{$counterCart$sourceId}}">  +  </view>
    <input type="number" bindinput="$counterCart$inputTap" bindblur="$counterCart$blurTap" class="counter-btn number {{$counterCart$isDisabled ? 'disable' : ''}}" value="{{$counterCart$num}}" focus="{{$counterCart$autoFocus}}" data-id="{{$counterCart$sourceId}}" disabled="{{$counterCart$isDisabled}}"/> 
    <view catchtap="$counterCart$minusTap" class="counter-btn minusBtn {{$counterCart$isDisabled || !$counterCart$isAble ? '' : 'able'}}" data-id="{{$counterCart$sourceId}}">  -  </view>
  </view>

          <text wx:if="{{maxtip}}" class="title link inline">数量已达上限</text>
        </view>
      </view>
      <radio-group bindchange="addCartGoods">
        <block wx:for="{{detail.goodList}}" wx:for-index="index" wx:for-item="item" wx:key="key">
          <view class="popup_layer">
            <view class="goods-name {{item.num === 0 ? 'none' : ''}}">{{item.name}}</view>
            <view class="goods-num {{item.num === 0 ? 'none' : ''}}">库存{{item.num === 0 ? '不足' : item.num}}<radio value="{{index}}" color="{{item.num === 0? '#ccc' : '#ec3d3a'}}" checked="{{item.checked}}" disabled="{{item.num === 0? true : false}}"/></view>
          </view>
        </block>
      </radio-group>
      <button class="default-button size-full {{cartResult.num === 0 ? 'disable' : ''}}" catchtap="goCart">{{isAddCart ? '加入购物车' : '立即购买'}}</button>
    </view>
  </view>